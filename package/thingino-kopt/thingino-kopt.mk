################ JZ_MAC #########################
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_JZ_MAC_V12),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_JZ_MAC_V12
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC_V12)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC_MODE)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC_RMII)
endef
endif

ifeq ($(BR2_PACKAGE_THINGINO_KOPT_JZ_MAC_V13),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_JZ_MAC_V13
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC_V13)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC_MODE)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZ_MAC_RMII)
endef
endif

################ MMC #########################
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC
	$(call KCONFIG_ENABLE_OPT,CONFIG_MMC)
	$(call KCONFIG_ENABLE_OPT,CONFIG_MMC_BLOCK)
	$(call KCONFIG_SET_OPT,CONFIG_MMC_BLOCK_MINORS,8)
	$(call KCONFIG_ENABLE_OPT,CONFIG_MMC_BLOCK_BOUNCE)
	$(call KCONFIG_SET_OPT,CONFIG_JZMMC_V12,m)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_SDMA)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC0),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC0)
	$(call KCONFIG_SET_OPT,CONFIG_MMC0_MAX_FREQ,48000000)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC0_1BIT),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0_1BIT
	# 1bit needs the pb_4bit...
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC0_1BIT)
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC0_PB_4BIT)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC0_PB_4BIT),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0_PB_4BIT
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC0_PB_4BIT)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC0_PB_8BIT),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0_PB_8BIT
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC0_PB_8BIT)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC1),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC1
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC1)
	$(call KCONFIG_SET_OPT,CONFIG_MMC0_MAX_FREQ,24000000)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC1_PB_4BIT),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC1_PB_4BIT
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC1_PB_4BIT)
endef
endif
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_MMC1_PB_8BIT),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC1_PB_8BIT
	$(call KCONFIG_ENABLE_OPT,CONFIG_JZMMC_V12_MMC1_PB_8BIT)
endef
endif

################ DWC2 #########################
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_DWC2_OTG),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_DWC2_OTG
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_ARCH_HAS_OHCI)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_ARCH_HAS_HCD)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_SUPPORT)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_COMMON)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_OTG)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_JZ_DWC2)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_DWC2_DUAL_ROLE)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_DWC2_VERBOSE_VERBOSE)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_GADGET)
	$(call KCONFIG_SET_OPT,CONFIG_USB_GADGET_VBUS_DRAW,2)
	$(call KCONFIG_SET_OPT,CONFIG_USB_GADGET_STORAGE_NUM_BUFFERS,2)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_USBNET)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_NET_AX8817X)
endef
endif

ifeq ($(BR2_PACKAGE_THINGINO_KOPT_DWC2_WIFI_ONLY),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_DWC2_WIFI
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_ARCH_HAS_OHCI)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_ARCH_HAS_HCD)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_SUPPORT)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_COMMON)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_JZ_DWC2)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_DWC2_HOST_ONLY)
	$(call KCONFIG_ENABLE_OPT,CONFIG_USB_DWC2_VERBOSE_VERBOSE)
endef
endif
################ UART #########################
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_UART0),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_UART0
	$(call KCONFIG_ENABLE_OPT,SERIAL_JZ47XX_UART0)
endef
endif

ifeq ($(BR2_PACKAGE_THINGINO_KOPT_UART2),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_UART2
	$(call KCONFIG_ENABLE_OPT,SERIAL_JZ47XX_UART2)
endef
endif

################ RTC #########################
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_RTC),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_RTC
# CONFIG_RTC_CLASS
# CONFIG_RTC_HCTOSYS
# CONFIG_RTC_SYSTOHC
# CONFIG_RTC_HCTOSYS_DEVICE="rtc0"
# # CONFIG_RTC_DEBUG is not set
# # RTC interfaces
# CONFIG_RTC_INTF_SYSFS
# CONFIG_RTC_INTF_PROC
# CONFIG_RTC_INTF_DEV
endef
endif

################ PWM #########################
ifeq ($(BR2_PACKAGE_THINGINO_KOPT_PWM),y)
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS_PWM
	$(call KCONFIG_ENABLE_OPT,CONFIG_MFD_CORE)
	$(call KCONFIG_ENABLE_OPT,CONFIG_MFD_JZ_TCU)
	$(call KCONFIG_ENABLE_OPT,CONFIG_PWM)
endef
endif

################ WDT #########################
################ I2C #########################
################ SADC #########################


####################################################
#This is required for BR to successfully concatenate the kernel options when used with modules
define THINGINO_KOPT_LINUX_CONFIG_FIXUPS
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_JZ_MAC_V12)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_JZ_MAC_V13)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC1)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0_1BIT)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0_PB_4BIT)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC0_PB_8BIT)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC1_PB_4BIT)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_MMC1_PB_8BIT)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_DWC2_OTG)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_DWC2_WIFI)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_RTC)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_PWM)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_UART0)
	$(call THINGINO_KOPT_LINUX_CONFIG_FIXUPS_UART2)
endef

$(eval $(generic-package))
